# IntelliExtract Runner - Configuration (example)
# 1. Copy this file to config.yaml:  cp config.example.yaml config.yaml
# 2. Set environment variables (see .env.example or README): INTELLIEXTRACT_BASE_URL, etc.
# 3. Edit buckets / paths below if needed.

api:
  baseUrl: ${INTELLIEXTRACT_BASE_URL}
  timeoutMs: 60000

# S3: buckets are built from .env S3_BUCKET + S3_TENANT_PURCHASERS (single bucket, tenant/purchaser folders).
# Use --tenant and --purchaser on sync/run to scope to one tenant's purchaser.
s3:
  # Buckets are normally built from environment:
  #   S3_BUCKET (physical bucket name)
  #   S3_TENANT_PURCHASERS (JSON map: { "brand": ["PURCHASER1","PURCHASER2"] })
  # When those env vars are set, this array is replaced at runtime (see src/config.ts).
  # Keep it empty here so there is no unused template entry.
  buckets: []
  stagingDir: ./output/staging
  region: us-west-2
  syncLimit: 0

# Extraction run settings
run:
  concurrency: 5
  requestsPerSecond: 10
  databasePath: ./output/intelliextract.db
  skipCompleted: true
  # Optional: API retry settings (for timeouts/5xx/429). Defaults: maxRetries=0, retryBackoffMs=500.
  maxRetries: 2
  retryBackoffMs: 500

# Logging
logging:
  dir: ./output/logs
  requestResponseLog: request-response.jsonl
  maxResponseBodyLength: 50000

# Reporting - Automatically generates executive summaries following extraction
report:
  outputDir: ./output/reports
  formats:
    - html # Standardized report with consolidated headers and 1024px optimizations
    - json # Raw metrics and per-file result data
  # Optional: keep only the last N report sets (each run = one .html + one .json).
  # Older reports are deleted after each write to maintain a clean workspace.
  # retainCount: 10
